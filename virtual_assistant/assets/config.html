{% extends "base.html" %}

{% block title %}Configuration{% endblock %}

{% block content %}
<h1>Configuration</h1>
<form method="POST" action="{{ url_for('save_config') }}">
    <div class="form-group">
        <label>Task Provider:</label>
        <select class="form-control" name="task_provider">
            <option value="todoist">Todoist</option>
            <option value="sqlite">Local DB</option>
        </select>
    </div>
    <div class="form-group">
        <label>AI Provider:</label>
        <select class="form-control" name="ai_provider">
            <option value="openai">OpenAI</option>
            <option value="grok">Grok</option>
        </select>
    </div>
    <div class="form-group">
        <label>Calendar Accounts:</label>
        <a href="{{ url_for('meetings.manage_calendar_accounts') }}" class="btn btn-primary">Manage Calendar Accounts</a>
    </div>
    <div class="form-group">
        <label>Todoist Authentication:</label>
        <a href="{{ url_for('todoist_auth.setup_credentials') }}" class="btn btn-primary">Authenticate</a>
    </div>
    <div class="form-group">
        <label>OpenAI API Key:</label>
        <input type="password" name="openai_key" class="form-control" placeholder="Enter API Key">
    </div>
    <div class="form-group">
        <label>Grok API Key:</label>
        <input type="password" name="grok_key" class="form-control" placeholder="Enter API Key">
    </div>
    <div class="form-group mt-4">
        <button type="submit" name="action" value="save" class="btn btn-primary">Save Changes</button>
        <button type="submit" name="action" value="save_and_return" class="btn btn-success">Save & Return Home</button>
        <a href="{{ url_for('index') }}" class="btn btn-secondary">Cancel</a>
    </div>
</form>

<div id="flash-messages">
    {% with messages = get_flashed_messages() %}
        {% if messages %}
            {% for message in messages %}
                <div class="alert alert-info">{{ message }}</div>
            {% endfor %}
        {% endif %}
    {% endwith %}
</div>
{% endblock %}